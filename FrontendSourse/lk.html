<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEALS EAT - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .nav {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }

        .nav-container {
            display: flex;
            gap: 15px;
            justify-content: flex-start;
        }

        .nav-button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            font-weight: 500;
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .nav-button a {
            color: white;
            text-decoration: none;
        }

        .nav-button.active {
            background: rgba(255, 255, 255, 0.4);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .profile-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .user-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .user-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 48px;
            color: white;
        }

        .user-name {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .user-details {
            width: 100%;
            margin-top: 20px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e1e5e9;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #666;
            font-weight: 500;
        }

        .detail-value {
            color: #333;
            font-weight: 600;
        }

        .stats-card {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .stat-item {
            background: #f8f4ff;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid #d6c2ff;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #6a11cb;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .chart-container {
            margin-top: 30px;
        }

        .chart-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
            text-align: center;
        }

        .chart {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .chart-bars {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            height: 200px;
            margin-bottom: 20px;
            padding: 0 10px;
        }

        .chart-bar {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 12%;
        }

        .bar {
            width: 100%;
            background: linear-gradient(to top, #4cd964, #5ac8fa);
            border-radius: 5px 5px 0 0;
            transition: height 0.5s ease;
            position: relative;
        }

        .bar-value {
            position: absolute;
            top: -25px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: #333;
        }

        .bar-label {
            margin-top: 10px;
            font-size: 12px;
            color: #666;
            text-align: center;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
            background: linear-gradient(to right, #4cd964, #5ac8fa);
        }

        .legend-text {
            font-size: 14px;
            color: #666;
        }

        .goal-info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }

        .goal-value {
            font-size: 24px;
            font-weight: bold;
            color: #1976d2;
        }

        @media (max-width: 768px) {
            .profile-container {
                grid-template-columns: 1fr;
            }
            
            .stats-card {
                grid-template-columns: 1fr;
            }
        }
        .weight-progress-container {
    margin-top: 30px;
    padding: 20px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

.progress-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 15px;
    color: #333;
    text-align: center;
}

.progress-bar {
    height: 20px;
    background: #e0e0e0;
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 10px;
    position: relative;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(to right, #4cd964, #5ac8fa);
    border-radius: 10px;
    width: 0%;
    transition: width 0.5s ease;
    position: relative;
}

.progress-labels {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: #666;
}

.edit-weight-btn, .edit-target-btn {
    transition: transform 0.2s ease;
}

.edit-weight-btn:hover, .edit-target-btn:hover {
    transform: scale(1.2);
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background-color: white;
    border-radius: 15px;
    width: 90%;
    max-width: 400px;
    padding: 20px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #e0e0e0;
}

.modal-title {
    font-size: 18px;
    font-weight: 600;
    color: #6a11cb;
}

.close-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #666;
}

.modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.btn {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-primary {
    background-color: #6a11cb;
    color: white;
}

.btn-primary:hover {
    background-color: #5a0db3;
}

.btn-secondary {
    background-color: #e0e0e0;
    color: #333;
}

.btn-secondary:hover {
    background-color: #d0d0d0;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    color: #555;
    font-weight: 500;
}

.form-group input {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid #e1e5e9;
    border-radius: 10px;
    font-size: 16px;
    transition: all 0.3s ease;
    background: white;
}

.form-group input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}
    </style>
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é -->
    <nav class="nav">
        <div class="nav-container">
            <button class="nav-button">
                <a href="Login.html">üè† –ì–ª–∞–≤–Ω–∞—è</a>
            </button>
            <button class="nav-button">
                <a href="note2.html">üìñ –î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è</a>
            </button>
          
        </div>
    </nav>

    <div class="container">
        <div class="profile-container">
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
            <div class="card user-info">
                <div class="user-avatar">
                    üë§
                </div>
                <div class="user-name" id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                <div class="user-details">
                    <div class="detail-item">
                        <span class="detail-label">–í–æ–∑—Ä–∞—Å—Ç:</span>
                        <span class="detail-value" id="user-age">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–†–æ—Å—Ç:</span>
                        <span class="detail-value" id="user-height">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–í–µ—Å:</span>
                        <span class="detail-value" id="user-weight">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–ü–æ–ª:</span>
                        <span class="detail-value" id="user-gender">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">–¶–µ–ª—å:</span>
                        <span class="detail-value" id="user-goal">-</span>
                    </div>
                    <div class="detail-item">
    <span class="detail-label">–¢–µ–∫—É—â–∏–π –≤–µ—Å:</span>
    <span class="detail-value" id="current-weight">-</span>
    <button class="edit-weight-btn" style="background: none; border: none; cursor: pointer; margin-left: 10px;">‚úèÔ∏è</button>
</div>
<div class="detail-item">
    <span class="detail-label">–¶–µ–ª–µ–≤–æ–π –≤–µ—Å:</span>
    <span class="detail-value" id="target-weight">-</span>
    <button class="edit-target-btn" style="background: none; border: none; cursor: pointer; margin-left: 10px;">‚úèÔ∏è</button>
</div>
<div class="detail-item">
    <span class="detail-label">–ü—Ä–æ–≥—Ä–µ—Å—Å:</span>
    <span class="detail-value" id="weight-progress">-</span>
</div>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫ -->
            <div class="card">
                <div class="stats-card">
                    <div class="stat-item">
                        <div class="stat-value" id="daily-norm">-</div>
                        <div class="stat-label">–î–Ω–µ–≤–Ω–∞—è –Ω–æ—Ä–º–∞ –∫–∞–ª–æ—Ä–∏–π</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="today-calories">-</div>
                        <div class="stat-label">–ö–∞–ª–æ—Ä–∏–π —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="avg-calories">-</div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –∑–∞ –Ω–µ–¥–µ–ª—é</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="goal-progress">-</div>
                        <div class="stat-label">–ü—Ä–æ–≥—Ä–µ—Å—Å –∫ —Ü–µ–ª–∏</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∫–∞–ª–æ—Ä–∏–π –∑–∞ –Ω–µ–¥–µ–ª—é</div>
                    <div class="chart">
                        <div class="chart-bars" id="chart-bars">
                            <!-- –ì—Ä–∞—Ñ–∏–∫ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
                        </div>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <div class="legend-color"></div>
                                <div class="legend-text">–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–Ω—ã–µ –∫–∞–ª–æ—Ä–∏–∏</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="goal-info">
                    <div>–í–∞—à–∞ –¥–Ω–µ–≤–Ω–∞—è –Ω–æ—Ä–º–∞ –∫–∞–ª–æ—Ä–∏–π:</div>
                    <div class="goal-value" id="goal-calories">- –∫–∫–∞–ª</div>
                </div>
                <div class="weight-progress-container">
    <div class="progress-title">–ü—Ä–æ–≥—Ä–µ—Å—Å –∫ —Ü–µ–ª–µ–≤–æ–π –≤–µ—Å–µ</div>
    <div class="progress-bar">
        <div class="progress-fill" id="weight-progress-bar"></div>
    </div>
    
    <div class="progress-labels">
        <span id="start-weight">-</span>
        <span id="target-weight-label">-</span>
    </div>
</div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ localStorage (–∏–∑ Login.html)
            const userData = JSON.parse(localStorage.getItem('userData')) || getDefaultUserData();
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –≤–µ—Å–µ
            let weightData = JSON.parse(localStorage.getItem('weightData')) || {
                current: userData.weight,
                target: calculateTargetWeight(userData.weight, userData.goal),
                start: userData.weight,
                history: []
            };

            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('user-name').textContent = userData.username;
            document.getElementById('user-age').textContent = userData.age + ' –ª–µ—Ç';
            document.getElementById('user-height').textContent = userData.height + ' —Å–º';
            document.getElementById('user-weight').textContent = userData.weight + ' –∫–≥';
            document.getElementById('user-gender').textContent = getGenderText(userData.gender);
            document.getElementById('user-goal').textContent = getGoalText(userData.goal);
            document.getElementById('daily-norm').textContent = userData.dailyNorm;
            document.getElementById('goal-calories').textContent = userData.dailyNorm + ' –∫–∫–∞–ª';

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –≤–µ—Å–µ
            initWeightData();

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–Ω—ã—Ö –∫–∞–ª–æ—Ä–∏—è—Ö (–∏–º–∏—Ç–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑ note2.html)
            const weekData = JSON.parse(localStorage.getItem('weekCalories')) || generateWeekData(userData.dailyNorm);

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            updateStats(weekData, userData.dailyNorm);

            // –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
            buildChart(weekData, userData.dailyNorm);

            // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            function getDefaultUserData() {
                return {
                    username: userData.username,
                    age:  userData.age,
                    height: userData.height,
                    weight: userData.weight,
                    gender:  getGenderText(userData.gender),
                    goal: 'maintain',
                    dailyNorm: userData.dailyNorm
                };
            }

            // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ø–æ–ª–∞
            function getGenderText(gender) {
                const genders = {
                    'male': '–ú—É–∂—Å–∫–æ–π',
                    'female': '–ñ–µ–Ω—Å–∫–∏–π',
                    'other': '–î—Ä—É–≥–æ–π'
                };
                return genders[gender] || '–ù–µ —É–∫–∞–∑–∞–Ω';
            }

            // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Ü–µ–ª–∏
            function getGoalText(goal) {
                const goals = {
                    'lose': '–ü–æ—Ö—É–¥–µ–Ω–∏–µ',
                    'maintain': '–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–µ—Å–∞',
                    'gain': '–ù–∞–±–æ—Ä –º–∞—Å—Å—ã'
                };
                return goals[goal] || '–ù–µ —É–∫–∞–∑–∞–Ω–∞';
            }

            // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–ª–µ–≤–æ–≥–æ –≤–µ—Å–∞
            function calculateTargetWeight(currentWeight, goal) {
                switch(goal) {
                    case 'lose':
                        return Math.max(currentWeight - 5, 50); // –ú–∏–Ω–∏–º—É–º 50 –∫–≥
                    case 'gain':
                        return currentWeight + 5;
                    default:
                        return currentWeight;
                }
            }

            
            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            function updateStats(weekData, dailyNorm) {
                const days = Object.keys(weekData);
                const today = new Date().getDay();
                // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –¥–Ω—è –Ω–µ–¥–µ–ª–∏ (0-6) –≤ –Ω–∞—à —Ñ–æ—Ä–º–∞—Ç (–ü–Ω-–í—Å)
                const dayNames = ['–í—Å', '–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±'];
                const todayName = dayNames[today];
                
                // –ö–∞–ª–æ—Ä–∏–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
                const todayCalories = weekData[todayName] || 0;
                document.getElementById('today-calories').textContent = todayCalories;
                
                // –°—Ä–µ–¥–Ω–µ–µ –∑–∞ –Ω–µ–¥–µ–ª—é
                const totalCalories = Object.values(weekData).reduce((sum, calories) => sum + calories, 0);
                const avgCalories = Math.round(totalCalories / days.length);
                document.getElementById('avg-calories').textContent = avgCalories;
                
                // –ü—Ä–æ–≥—Ä–µ—Å—Å –∫ —Ü–µ–ª–∏
                const goalProgress = Math.round((todayCalories / dailyNorm) * 100);
                document.getElementById('goal-progress').textContent = goalProgress + '%';
            }

            // –§—É–Ω–∫—Ü–∏—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
            function buildChart(weekData, dailyNorm) {
                const chartBars = document.getElementById('chart-bars');
                chartBars.innerHTML = '';
                
                const maxCalories = Math.max(...Object.values(weekData), dailyNorm);
                
                Object.entries(weekData).forEach(([day, calories]) => {
                    const barContainer = document.createElement('div');
                    barContainer.className = 'chart-bar';
                    
                    const barHeight = Math.round((calories / maxCalories) * 180);
                    
                    const bar = document.createElement('div');
                    bar.className = 'bar';
                    bar.style.height = barHeight + 'px';
                    
                    const barValue = document.createElement('div');
                    barValue.className = 'bar-value';
                    barValue.textContent = calories;
                    
                    const barLabel = document.createElement('div');
                    barLabel.className = 'bar-label';
                    barLabel.textContent = day;
                    
                    bar.appendChild(barValue);
                    barContainer.appendChild(bar);
                    barContainer.appendChild(barLabel);
                    
                    chartBars.appendChild(barContainer);
                });
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –≤–µ—Å–µ
            function initWeightData() {
                updateWeightDisplay();
                updateWeightProgress();
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –≤–µ—Å–µ
            function updateWeightDisplay() {
                document.getElementById('current-weight').textContent = weightData.current + ' –∫–≥';
                document.getElementById('target-weight').textContent = weightData.target + ' –∫–≥';
                document.getElementById('start-weight').textContent = weightData.start + ' –∫–≥';
                document.getElementById('target-weight-label').textContent = weightData.target + ' –∫–≥';
                
                // –†–∞—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
                const totalChange = weightData.start - weightData.target;
                const currentChange = weightData.start - weightData.current;
                const progress = totalChange !== 0 ? (currentChange / totalChange) * 100 : 0;
                
                document.getElementById('weight-progress').textContent = 
                    `${currentChange > 0 ? '-' : '+'}${Math.abs(currentChange).toFixed(1)} –∫–≥`;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
                document.getElementById('weight-progress-bar').style.width = `${Math.min(Math.max(progress, 0), 100)}%`;
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ –≤–µ—Å—É
            function updateWeightProgress() {
                const progressBar = document.getElementById('weight-progress-bar');
                const totalChange = weightData.start - weightData.target;
                const currentChange = weightData.start - weightData.current;
                const progress = totalChange !== 0 ? (currentChange / totalChange) * 100 : 0;
                
                progressBar.style.width = `${Math.min(Math.max(progress, 0), 100)}%`;
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            document.querySelector('.edit-weight-btn').addEventListener('click', function() {
                openWeightModal('current');
            });

            document.querySelector('.edit-target-btn').addEventListener('click', function() {
                openWeightModal('target');
            });

            // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            function openWeightModal(type) {
                const modal = document.getElementById('weight-modal');
                const title = document.getElementById('weight-modal-title');
                const input = document.getElementById('weight-input');
                
                if (type === 'current') {
                    title.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –≤–µ—Å–∞';
                    input.value = weightData.current;
                } else {
                    title.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–≥–æ –≤–µ—Å–∞';
                    input.value = weightData.target;
                }
                
                modal.style.display = 'flex';
                modal.dataset.editType = type;
                input.focus();
            }

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            document.querySelector('.close-btn').addEventListener('click', closeWeightModal);
            document.getElementById('cancel-weight-btn').addEventListener('click', closeWeightModal);

            function closeWeightModal() {
                document.getElementById('weight-modal').style.display = 'none';
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Å–∞
            document.getElementById('save-weight-btn').addEventListener('click', function() {
                const modal = document.getElementById('weight-modal');
                const type = modal.dataset.editType;
                const input = document.getElementById('weight-input');
                const value = parseFloat(input.value);
                
                if (isNaN(value) || value <= 0) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ—Å–∞');
                    return;
                }
                
                if (type === 'current') {
                    // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
                    weightData.history.push({
                        date: new Date().toISOString().split('T')[0],
                        weight: value
                    });
                    
                    weightData.current = value;
                } else {
                    weightData.target = value;
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                localStorage.setItem('weightData', JSON.stringify(weightData));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                updateWeightDisplay();
                updateWeightProgress();
                
                closeWeightModal();
            });

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ localStorage –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            localStorage.setItem('userData', JSON.stringify(userData));
            localStorage.setItem('weekCalories', JSON.stringify(weekData));
        });
    </script>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ—Å–∞ -->
    <div class="modal" id="weight-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="weight-modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ—Å–∞</div>
                <button class="close-btn">&times;</button>
            </div>
            <div class="form-group">
                <label for="weight-input">–í–µ—Å (–∫–≥):</label>
                <input type="number" id="weight-input" min="1" step="0.1" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å">
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancel-weight-btn">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" id="save-weight-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
</body>
</html>